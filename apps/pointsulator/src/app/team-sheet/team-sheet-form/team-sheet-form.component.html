<form [formGroup]="form" class="control-container">
  <mat-form-field>
    <mat-label>Valid From Week</mat-label>
    <select matNativeControl formControlName="week">
      <option *ngFor="let week of weeks" [ngValue]="week.num">
        Week #{{ week.num }} - {{ week.date | date: 'short' }}
      </option>
    </select>
  </mat-form-field>

  <h3>Assets</h3>

  <table
    mat-table
    [dataSource]="assetsArray.controls"
    matSort
    #dataTable
    class="pick-assets-table"
    formArrayName="assets"
  >
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
      <td mat-cell *matCellDef="let ctrl">{{ ctrl.value.asset.name }}</td>
    </ng-container>

    <ng-container matColumnDef="type">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Type</th>
      <td mat-cell *matCellDef="let ctrl">{{ ctrl.value.asset.type }}</td>
    </ng-container>

    <ng-container matColumnDef="team">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Team</th>
      <td mat-cell *matCellDef="let ctrl">
        {{ ctrl.value.asset.team }}
      </td>
    </ng-container>

    <ng-container matColumnDef="playing">
      <th mat-header-cell *matHeaderCellDef>Playing</th>
      <td mat-cell *matCellDef="let asset; let i = index">
        <ng-container [formGroupName]="i">
          <mat-checkbox formControlName="playing"></mat-checkbox>
        </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="substitute">
      <th mat-header-cell *matHeaderCellDef>Substitute</th>
      <td mat-cell *matCellDef="let asset; let i = index">
        <ng-container [formGroupName]="i">
          <mat-checkbox formControlName="substitute"></mat-checkbox>
        </ng-container>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</form>
